syntax = "proto3";

package Dadtkv;

import "protos/LeaseManager.proto";
import "protos/DadInt.proto";

service TransactionManagerService {
  // Execute a transaction, including read and write operations.
  rpc ExecuteTransaction(TransactionRequest) returns (TransactionResponse);
  rpc BroadcastDadInts(BroadcastDadIntsMsg) returns (BroadcastDadIntsAck);
}

message TransactionRequest {
  string client_id = 1;
  repeated string read_dadints = 2;
  repeated DadInt write_dadints = 3;
}

message TransactionResponse {
  repeated DadInt read_values = 1;
}

message BroadcastDadIntsMsg {
  repeated DadInt dadints = 1;
}

message BroadcastDadIntsAck {
  bool ok = 1;
}